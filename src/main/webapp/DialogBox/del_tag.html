<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="dialog_style.css" />
<meta charset="UTF-8">
<title>タグの削除</title>
</head>
<body>
	<header></header>
	<div id="Comment">
			<label for="Del-Name">削除するタグの指定</label>
	</div>
	<div id="com"></div>
	<div class="Set-Position">
		<select name="del-tag" class="Selector" id="Del-Name" value="" >
			<option value="-1"></option>
		</select>
	</div>
	<div id="Permit-Button">
		<input type="button" id="Button-Style" value="OK" onclick="sendData()" />
	</div>
<script>
	window.addEventListener( "DOMContentLoaded", ()=> {
		const sel = window.opener.sendMenu();
		var optionEl = [];
		let cnt = 0;
		const delTagBoxEl = document.getElementById( "Del-Name" );
		
		if( sel.length > 1 ) {
			for( const option of sel.options ) {
				if( cnt > 0 ) {
					var tmp = optionEl[ cnt - 1 ];
					tmp = document.createElement( "option" );
					tmp.value = String( cnt - 1 );
					tmp.text = option.label;
					delTagBoxEl.appendChild( tmp );
				}

				cnt += 1;
			}
		} else {
			delTagBoxEl.disabled = true;
		}
	}, false );

	function sendData() {
		const selectBox = document.getElementById( "Del-Name" );
		const delIndex = selectBox.value;
		if( delIndex != "-1" ) {
			window.opener.delMenu( delIndex );
			window.close();
		}
	}
	var select = document.getElementById( "Del-Name" );
	select.onchange = function() {
		let box = document.querySelector( "#com" );
		if( this.value != "-1" ) {
			box.textContent = select.options[ parseInt( this.value ) + 1 ].label + " を削除します。";
		} else {
			box.textContent = "";
		}
	}

</script>
</body>
</html>